@using BoardBrawl.WebApp.MVC.Areas.Game.Models;
@model PlayerBoard

<style>
    .focusedPlayer {
        outline: 2px solid yellow;
    }
</style>

<div class="d-flex flex-column h-100 overflow-auto">
    <ul class="nav h-100">
        @foreach (var playerInfo in Model.Players)
        {
            var isFocusedPlayer = Model.ActivePlayerUserId == playerInfo.UserId ? "focusedPlayer" : "";

            <li class="nav-item w-100 m-1">
                @{
                    <div class="@(isFocusedPlayer)">
                        <div class="playerInfo" data-userid="@playerInfo.UserId">@await Component.InvokeAsync("PlayerInfo", playerInfo)</div>

                        @if (playerInfo.UserId == Model.UserId)
                        {
                            <video class="playerVideo localVideo" muted style="width:100%"></video>
                            <div class="errorImage container" data-userid="@playerInfo.UserId" style="display:none"><img class="img-fluid" src="~/images/game/error-image-generic.png" /></div>
                        }
                        else
                        {
                            <video class="playerVideo remoteVideo" style="width:100%" data-userid="@playerInfo.UserId" data-peerid="@playerInfo.PeerId"></video>
                            <div class="errorImage container" data-userid="@playerInfo.UserId" data-peerid="@playerInfo.PeerId" style="display:none"><img class="img-fluid" src="~/images/game/error-image-generic.png" /></div>
                        }
                    </div>
                }
            </li>
        }
    </ul>
</div>